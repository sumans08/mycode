/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var b=["vs/workbench/contrib/output/common/outputLinkComputer","require","exports","vs/base/common/uri","vs/base/common/extpath","vs/base/common/resources","vs/base/common/strings","vs/editor/common/core/range","vs/base/common/platform","vs/base/common/network"],w=function(d){for(var u=[],h=0,g=d.length;h<g;h++)u[h]=b[d[h]];return u};define(b[0],w([1,2,3,4,5,6,7,8,9]),function(d,u,h,g,C,a,x,E,R){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.create=u.OutputLinkComputer=void 0;class p{constructor(e,t){this.ctx=e,this.patterns=new Map,this.computePatterns(t)}computePatterns(e){const t=e.workspaceFolders.sort((r,o)=>o.length-r.length).map(r=>h.URI.parse(r));for(const r of t){const o=p.createPatterns(r);this.patterns.set(r,o)}}getModel(e){return this.ctx.getMirrorModels().find(r=>r.uri.toString()===e)}computeLinks(e){const t=this.getModel(e);if(!t)return[];const r=[],o=a.splitLines(t.getValue());for(const[s,i]of this.patterns){const c={toResource:n=>typeof n=="string"?C.joinPath(s,n):null};for(let n=0,f=o.length;n<f;n++)r.push(...p.detectLinks(o[n],n+1,i,c))}return r}static createPatterns(e){const t=[],r=e.scheme===R.Schemas.file?e.fsPath:e.path,o=[r];E.isWindows&&e.scheme===R.Schemas.file&&o.push(g.toSlashes(r));for(const s of o){const i='[^\\s\\(\\):<>"]',n=`${`(?:${i}| ${i})`}+\\.${i}+`,f=`${i}+`;t.push(new RegExp(a.escapeRegExpCharacters(s)+`(${n}) on line ((\\d+)(, column (\\d+))?)`,"gi")),t.push(new RegExp(a.escapeRegExpCharacters(s)+`(${n}):line ((\\d+)(, column (\\d+))?)`,"gi")),t.push(new RegExp(a.escapeRegExpCharacters(s)+`(${n})(\\s?\\((\\d+)(,(\\d+))?)\\)`,"gi")),t.push(new RegExp(a.escapeRegExpCharacters(s)+`(${f})(:(\\d+))?(:(\\d+))?`,"gi"))}return t}static detectLinks(e,t,r,o){const s=[];return r.forEach(i=>{i.lastIndex=0;let c,n=0;for(;(c=i.exec(e))!==null;){const f=a.rtrim(c[1],".").replace(/\\/g,"/");let m;try{const l=o.toResource(f);l&&(m=l.toString())}catch{continue}if(c[3]){const l=c[3];if(c[5]){const M=c[5];m=a.format("{0}#{1},{2}",m,l,M)}else m=a.format("{0}#{1}",m,l)}const P=a.rtrim(c[0],"."),v=e.indexOf(P,n);n=v+P.length;const k={startColumn:v+1,startLineNumber:t,endColumn:v+1+P.length,endLineNumber:t};if(s.some(l=>x.Range.areIntersectingOrTouching(l.range,k)))return;s.push({range:k,url:m})}}),s}}u.OutputLinkComputer=p;function $(L,e){return new p(L,e)}u.create=$})}).call(this);

//# sourceMappingURL=outputLinkComputer.js.map
